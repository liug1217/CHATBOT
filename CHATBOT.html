<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=440, user-scalable=no, viewport-fit=cover">
    <title>AI 專業助手</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root { --main-blue: #007AFF; --ai-chat-bg: #FFFFFF; --user-chat-bg: #007AFF; }
        body { margin: 0; background: #F2F2F7; display: flex; justify-content: center; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        
        .app-container {
            width: 440px; height: 95vh; background: #FFF;
            display: flex; flex-direction: column; position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-top: 2.5vh; border-radius: 20px; overflow: hidden;
        }

        /* 頂部標題列 - 給別人看的專業感 */
        .app-header {
            padding: 20px; background: white; border-bottom: 1px solid #EEE;
            display: flex; align-items: center; justify-content: space-between;
        }
        .status-dot { width: 8px; height: 8px; background: #4CD964; border-radius: 50%; display: inline-block; margin-right: 5px; }

        .chat-window { flex: 1; padding: 20px; overflow-y: auto; background: #F9F9FB; display: flex; flex-direction: column; gap: 12px; }
        
        .msg { max-width: 80%; padding: 12px 16px; border-radius: 20px; font-size: 16px; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .ai-msg { background: white; align-self: flex-start; border-bottom-left-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .user-msg { background: var(--main-blue); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }

        .input-section { padding: 20px; background: white; display: flex; align-items: center; gap: 10px; border-top: 1px solid #EEE; }
        #input-field { flex: 1; border: none; background: #E9E9EB; padding: 12px 20px; border-radius: 25px; font-size: 16px; outline: none; }
        .send-icon { color: var(--main-blue); cursor: pointer; font-size: 30px; }

        /* 矩形 1：底部功能選單 */
        .bottom-nav { height: 80px; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #EEE; }
        .nav-btn { display: flex; flex-direction: column; align-items: center; color: #8E8E93; font-size: 10px; text-decoration: none; }
        .nav-btn.active { color: var(--main-blue); }
    </style>
</head>
<body>

<div class="app-container">
    <div class="app-header">
        <span style="font-weight: 600;">AI Core 專業版</span>
        <span style="font-size: 12px; color: #8E8E93;"><span class="status-dot"></span>在線</span>
    </div>

    <div class="chat-window" id="chat-box">
        <div class="msg ai-msg">您好，我是您的 AI 助手。請問今天有什麼可以幫您的？</div>
    </div>

    <div class="input-section">
        <input type="text" id="input-field" placeholder="輸入訊息..." autocomplete="off">
        <i class="material-icons send-icon" onclick="userSend()">send</i>
    </div>

    <div class="bottom-nav">
        <a href="#" class="nav-btn active"><i class="material-icons">chat</i><span>聊天</span></a>
        <a href="#" class="nav-btn"><i class="material-icons">explore</i><span>探索</span></a>
        <a href="#" class="nav-btn"><i class="material-icons">person</i><span>設定</span></a>
    </div>
</div>

<script>
    // 開發者定義的 Token 碼
    const MY_VOCAB = {
        "哈": 36452, "囉": "1746,235", "你": 12942, "好": 8021,
        "我": 7573, "是": 3741, "專": 1174820, "業": 22174
    };

    function userSend() {
        const input = document.getElementById('input-field');
        const text = input.value.trim();
        if(!text) return;

        addBubble(text, 'user-msg');
        input.value = '';

        // 核心邏輯：Token 化與數據回傳
        processData(text);
    }

    function processData(text) {
        // 1. 生成 Token 流 (未知字標記為 0)
        let tokenStream = [];
        let unknownChars = [];
        for (let char of text) {
            if (MY_VOCAB[char]) {
                tokenStream.push(MY_VOCAB[char]);
            } else {
                tokenStream.push(0);
                unknownChars.push(char);
            }
        }

        // 2. 模擬傳送到開發者後台 (傳到你這在看)
        console.log("--- [開發者數據收集] ---");
        console.log("來源文字:", text);
        console.log("Token ID:", tokenStream);
        console.log("待定義字元:", unknownChars);
        console.log("-----------------------");

        // 3. AI 的結合性回覆
        setTimeout(() => {
            let response = "";
            // 如果全是 Token 0，給予學習中的模糊回覆
            if (tokenStream.every(t => t === 0)) {
                response = "這是一個很有深度的話題，我正在記錄並分析相關資訊以提供更精確的回答。";
            } else if (tokenStream.includes(36452)) {
                response = "你好！很高興能為您服務。";
            } else {
                response = "收到您的訊息，我會根據專業邏輯進行處理。";
            }
            addBubble(response, 'ai-msg');
        }, 800);
    }

    function addBubble(txt, type) {
        const box = document.getElementById('chat-box');
        const div = document.createElement('div');
        div.className = `msg ${type}`;
        div.innerText = txt;
        box.appendChild(div);
        box.scrollTop = box.scrollHeight;
    }
</script>

</body>
</html>
